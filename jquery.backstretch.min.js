/*! Backstretch - v2.0.5 - 2013-12-24
* http://srobbin.com/jquery-plugins/backstretch/
* Copyright (c) 2013 Scott Robbin; Licensed MIT */
(function(e,t,n){"use strict";function i(e,t){var n=e.width(),r=[];for(var i=0;i<t.length;i++){t[i]=o(t[i]);var u=s(n,t[i]);r.push(u)}return r}function s(e,t){var n=0;while(n<t.length&&t[n].width<e)n++;return t[n-1].url}function o(e){for(var t=1;t<e.length;t++){var n=e[t],r=t;while(e[r-1]&&parseInt(e[r-1].width)>parseInt(n.width))e[r]=e[r-1],--r;e[r]=n}return e}function u(t){e.each(t,function(){e("<img />")[0].src=this})}e.fn.backstretch=function(n,r){return n||e.error("No images were supplied for Backstretch"),e(t).scrollTop()===0&&t.scrollTo(0,0),this.each(function(){var t=e(this),i=t.data("backstretch");if(i){if(typeof n=="string"&&typeof i[n]=="function"){i[n](r);return}r=e.extend(i.options,r),i.destroy(!0)}i=new a(this,n,r),t.data("backstretch",i)})},e.backstretch=function(t,n){return e("body").backstretch(t,n).data("backstretch")},e.expr[":"].backstretch=function(t){return e(t).data("backstretch")!==n},e.fn.backstretch.defaults={centeredX:!0,centeredY:!0,duration:5e3,fade:0};var r={wrap:{left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},img:{position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"auto",height:"auto",maxHeight:"none",maxWidth:"none",zIndex:-999999}},a=function(s,o,a){this.options=e.extend({},e.fn.backstretch.defaults,a||{}),this.images=e.isArray(o)?o:[o],this.$container=e(s),this.$root=this.isBody?f?e(t):e(document):this.$container,typeof this.images[0]=="object"&&(this.allSizes=e.isArray(this.images[0])?this.images:[this.images],this.images=i(this.$root,this.allSizes),this.images.length==1&&this.options.fade!==n&&(this.options.fade=750)),u(this.images);var l=this.$container.children(".backstretch").first();this.$wrap=l.length?l:e('<div class="backstretch"></div>').css(r.wrap).appendTo(this.$container),this.isBody=s===document.body;if(!this.isBody){var c=this.$container.css("position"),h=this.$container.css("zIndex");this.$container.css({position:c==="static"?"relative":c,zIndex:h==="auto"?0:h,background:"none"}),this.$wrap.css({zIndex:-999998})}this.$wrap.css({position:this.isBody&&f?"fixed":"absolute"}),this.index=0,this.show(this.index),e(t).on("resize.backstretch",e.proxy(this.resize,this)).on("orientationchange.backstretch",e.proxy(function(){this.isBody&&t.pageYOffset===0&&(t.scrollTo(0,1),this.resize())},this))};a.prototype={resize:function(){try{if(this.allSizes){var e=this.$root.width(),n=this.$img.width();if(e>n*1.03){this.images=i(this.$root,this.allSizes),u(this.images);if(this.images.length==1){var r=this;clearTimeout(r.timeout),r.timeout=setTimeout(function(){r.show(0)},2500)}}}var s={left:0,top:0},o=this.isBody?this.$root.width():this.$root.innerWidth(),a=o,f=this.isBody?t.innerHeight?t.innerHeight:this.$root.height():this.$root.innerHeight(),l=a/this.$img.data("ratio"),c;l>=f?(c=(l-f)/2,this.options.centeredY&&(s.top="-"+c+"px")):(l=f,a=l*this.$img.data("ratio"),c=(a-o)/2,this.options.centeredX&&(s.left="-"+c+"px")),this.$wrap.css({width:o,height:f}).find("img:not(.deleteable)").css({width:a,height:l}).css(s)}catch(h){}return this},show:function(t){if(Math.abs(t)>this.images.length-1)return;var n=this,i=n.$wrap.find("img").addClass("deleteable"),s={relatedTarget:n.$container[0]};return n.$container.trigger(e.Event("backstretch.before",s),[n,t]),this.index=t,clearInterval(n.interval),n.$img=e("<img />").css(r.img).bind("load",function(r){var o=this.width||e(r.target).width(),u=this.height||e(r.target).height();e(this).data("ratio",o/u),e(this).fadeIn(n.options.speed||n.options.fade,function(){i.remove(),n.paused||n.cycle(),e(["after","show"]).each(function(){n.$container.trigger(e.Event("backstretch."+this,s),[n,t])})}),n.resize()}).appendTo(n.$wrap),n.$img.attr("src",n.images[t]),n},next:function(){return this.show(this.index<this.images.length-1?this.index+1:0)},prev:function(){return this.show(this.index===0?this.images.length-1:this.index-1)},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this.next(),this},cycle:function(){return this.images.length>1&&(clearInterval(this.interval),this.interval=setInterval(e.proxy(function(){this.paused||this.next()},this),this.options.duration)),this},destroy:function(n){e(t).off("resize.backstretch orientationchange.backstretch"),clearInterval(this.interval),n||this.$wrap.remove(),this.$container.removeData("backstretch")}};var f=function(){var e=navigator.userAgent,n=navigator.platform,r=e.match(/AppleWebKit\/([0-9]+)/),i=!!r&&r[1],s=e.match(/Fennec\/([0-9]+)/),o=!!s&&s[1],u=e.match(/Opera Mobi\/([0-9]+)/),a=!!u&&u[1],f=e.match(/MSIE ([0-9]+)/),l=!!f&&f[1];return!((n.indexOf("iPhone")>-1||n.indexOf("iPad")>-1||n.indexOf("iPod")>-1)&&i&&i<534||t.operamini&&{}.toString.call(t.operamini)==="[object OperaMini]"||u&&a<7458||e.indexOf("Android")>-1&&i&&i<533||o&&o<6||"palmGetResource"in t&&i&&i<534||e.indexOf("MeeGo")>-1&&e.indexOf("NokiaBrowser/8.5.0")>-1||l&&l<=6)}()})(jQuery,window);