/*! Backstretch - v2.1.2 - 2014-02-20\n* http://srobbin.com/jquery-plugins/backstretch/
* Copyright (c) 2014 Giovanni T. Parra; Licensed MIT */!function(a,b,c){function d(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d].replace(/{{ *(\w+) *}}/g,function(b,c){try{return a[c]()}catch(d){return b}});c.push(e)}return c}function e(a,b){for(var c=a.width(),d=[],e=0;e<b.length;e++){b[e]=g(b[e]);var h=f(c,b[e]);d.push(h)}return d}function f(a,b){for(var c=0;c<b.length&&b[c].width<a;)c++;return b[c-1].url}function g(a){for(var b=1;b<a.length;b++){for(var c=a[b],d=b;a[d-1]&&parseInt(a[d-1].width)>parseInt(c.width);)a[d]=a[d-1],--d;a[d]=c}return a}a.fn.backstretch=function(c,d){return c||a.error("No images were supplied for Backstretch"),0===a(b).scrollTop()&&b.scrollTo(0,0),this.each(function(){var b=a(this),e=b.data("backstretch");if(e){if("string"==typeof c&&"function"==typeof e[c])return void e[c](d);for(var f in d)e.options[f]=d[f];e.destroy(!0)}e=new j(this,c,d),b.data("backstretch",e)})},a.backstretch=function(b,c){return a("body").backstretch(b,c).data("backstretch")},a.fn.backstretch.defaults={preload:2,centeredX:!0,centeredY:!0,duration:5e3,fade:0};var h={wrap:{left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},img:{position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"auto",height:"auto",maxHeight:"none",maxWidth:"none",zIndex:-999999}},i=function(){var b=[],c=function(a){for(var c=0;c<b.length;c++)if(b[c].src===a.src)return b[c];return b.push(a),a},d=function(a,b,c){"function"==typeof b&&b.call(a,c)};return function(b,e,f){if("undefined"!=typeof b){"string"==typeof b&&(b=[b]),2===arguments.length&&"function"==typeof e&&(f=e,e=0);var g,h=b.length;if(e>0&&h>e&&(g=b.slice(e,h),b=b.slice(0,e),h=b.length),!h)return void d(b,f,!0);for(var i,j=arguments.callee,k=0,l=function(){k++,k===h&&(d(b,f,!g),j(g,e,f))},m=0;m<b.length;m++)i=new Image,i.src=b[m],i=c(i),i.complete?l():a(i).on("load error",l)}}}(),j=function(f,g,j){this.options={},j=j||{};for(var l in a.fn.backstretch.defaults)this.options[l]=j[l]||a.fn.backstretch.defaults[l];this.images=a.isArray(g)?g:[g],this.$container=a(f),this.$root=this.isBody?a(k?b:document):this.$container,this.$width=this.$container.width(),"object"==typeof this.images[0]?(this.allSizes=a.isArray(this.images[0])?this.images:[this.images],this.images=e(this.$root,this.allSizes),1==this.images.length&&this.options.fade!==c&&(this.options.fade=750)):(this.imageTemplates=this.images,this.images=d(this.$root,this.imageTemplates)),i(this.images,this.options.preload);var m=this.$container.children(".backstretch").first();if(this.$wrap=m.length?m:a('<div class="backstretch"></div>').css(h.wrap).appendTo(this.$container),this.isBody=f===document.body,!this.isBody){var n=this.$container.css("position"),o=this.$container.css("zIndex");this.$container.css({position:"static"===n?"relative":n,zIndex:"auto"===o?0:o,background:"none"}),this.$wrap.css({zIndex:-999998})}this.$wrap.css({position:this.isBody&&k?"fixed":"absolute"}),this.index=0,this.show(this.index),a(b).on("resize.backstretch",a.proxy(this.resize,this)).on("orientationchange.backstretch",a.proxy(function(){this.isBody&&0===b.pageYOffset&&(b.scrollTo(0,1),this.resize())},this))};j.prototype={resize:function(){try{if(this.allSizes||this.imageTemplates){var a=this.$root.width(),c=this.$img.width(),f=this.$root.height(),g=this.$img.height();if((a>1.1*c||f>1.1*g)&&(this.allSizes?this.images=e(this.$root,this.allSizes):this.imageTemplates&&(this.images=d(this.$root,this.imageTemplates)),i(this.images,this.options.preload),1==this.images.length)){var h=this;clearTimeout(h.timeout),h.timeout=setTimeout(function(){h.show(0)},2500)}}var j,k={left:0,top:0},l=this.isBody?this.$root.width():this.$root.width()+parseInt(this.$root.css("padding-left"))+parseInt(this.$root.css("padding-right")),m=l,n=this.isBody?b.innerHeight?b.innerHeight:this.$root.height():this.$root.height()+parseInt(this.$root.css("padding-left"))+parseInt(this.$root.css("padding-right")),o=m/this.$img.data("ratio");o>=n?(j=(o-n)/2,this.options.centeredY&&(k.top="-"+j+"px")):(o=n,m=o*this.$img.data("ratio"),j=(m-l)/2,this.options.centeredX&&(k.left="-"+j+"px")),this.$wrap.css({width:l,height:n}).find("img:not(.deleteable)").css({width:m,height:o}).css(k)}catch(p){console.log(p)}return this},show:function(b){if(!(Math.abs(b)>this.images.length-1)){var c=this,d=c.$wrap.find("img").addClass("deleteable"),e={relatedTarget:c.$container[0]};return c.$container.trigger(a.Event("backstretch:before",e),[c,b]),this.index=b,clearInterval(c.interval),c.$img=a("<img />").css(h.img).width(this.$width).on("load",function(f){var g=this.width||a(f.target).width(),h=this.height||a(f.target).height();a(this).data("ratio",g/h),a(this).css({opacity:0,display:"block"}).animate({opacity:1},{duration:c.options.speed||c.options.fade,complete:function(){d.remove(),c.paused||c.cycle(),a(["after","show"]).each(function(){c.$container.trigger(a.Event("backstretch:"+this,e),[c,b])})}}),c.resize()}).appendTo(c.$wrap),c.$img.attr("src",c.images[b]),c}},next:function(){return this.show(this.index<this.images.length-1?this.index+1:0)},prev:function(){return this.show(0===this.index?this.images.length-1:this.index-1)},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this.next(),this},cycle:function(){return this.images.length>1&&(clearInterval(this.interval),this.interval=setInterval(a.proxy(function(){this.paused||this.next()},this),this.options.duration)),this},destroy:function(c){a(b).off("resize.backstretch orientationchange.backstretch"),clearInterval(this.interval),c||this.$wrap.remove(),this.$container.removeData("backstretch")}};var k=function(){var a=navigator.userAgent,c=navigator.platform,d=a.match(/AppleWebKit\/([0-9]+)/),e=!!d&&d[1],f=a.match(/Fennec\/([0-9]+)/),g=!!f&&f[1],h=a.match(/Opera Mobi\/([0-9]+)/),i=!!h&&h[1],j=a.match(/MSIE ([0-9]+)/),k=!!j&&j[1];return!((c.indexOf("iPhone")>-1||c.indexOf("iPad")>-1||c.indexOf("iPod")>-1)&&e&&534>e||b.operamini&&"[object OperaMini]"==={}.toString.call(b.operamini)||h&&7458>i||a.indexOf("Android")>-1&&e&&533>e||g&&6>g||"palmGetResource"in b&&e&&534>e||a.indexOf("MeeGo")>-1&&a.indexOf("NokiaBrowser/8.5.0")>-1||k&&6>=k)}()}(window.jQuery||window.Zepto||window.$,window);